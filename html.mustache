<!doctype html>
<!--[if lt IE 7]>            <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>                 <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>                 <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--><html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- not cache for PKI auth -->
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache, no-store" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />
    <base href="/">
    <title>GM API Gateway</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

    <link rel="stylesheet" href="static/css/error.css"/>

    <script type="text/javascript" src="//fast.fonts.net/jsapi/795ea957-4f04-4107-b927-6f74562c2b7c.js"></script>

</head>
<body ng-app="chimeraApp" class="chimera ng-scope">

<!-- STAET CONTENT HEADER -->
<div class="header content rows-content-header">

    <!-- BEGIN: Navigation bar -->
    <div class="navbar navbar-default" role="navigation">
        <div class="container">
            <!-- Your logo goes here -->
            <div class="logo-brand header sidebar rows">
                <div class="logo">
                    <h1>
                        <a href="/">
                            <!--
			    <img class="sidebar-header-image-icon" src="static/images/ChimeraLogo_v3_white_200x200.png" />
                            -->
   			    <!--
                            <img class="sidebar-header-image-icon" src="assets/images/chimera_logo_xs_inverted.png" />
                            <i class="sidebar-header-icon fa fa-flask" />&nbsp;&nbsp;
                             -->
                            <span class="text">Decipher APIs (Dynamically Generated by the API Gateway)</span>
       			</a>
                    </h1>
                </div>
            </div>
        </div><!-- End div .container -->
    </div>
    <!-- END: Navigation bar -->

</div>
<!-- END CONTENT HEADER -->
</br>
</br>
<b><i>Online Service Registry:</i></b>
</br>
<div id="services"></div>
<script>
	//Build object model
	var serviceList = {};

	{{#clusters}}
		serviceList.{{category}} = [];
	{{/clusters}}
	{{#clusters}}
                var service = {};
                service.description = "{{description}}";
                service.url = "https://private.deciphernow.com{{context}}";
		service.hasServers = {{hasServers}};

                serviceList.{{category}}.push(service);
        {{/clusters}}

	//Create HTML based on categories
	var serviceHtml = '';
	for (var serviceCategory in serviceList) {

		if (serviceCategory != 'hide') {
		    if (serviceList.hasOwnProperty(serviceCategory)) {
			var serviceEndpoints = serviceList[serviceCategory];

			for (var service in serviceEndpoints) {
				var serviceInfo = serviceEndpoints[service];


				if(serviceInfo.hasServers) {
					serviceHtml += "<a href=" + serviceInfo.url + ">" + serviceInfo.description + "</a></br>";
				} else {
					serviceHtml += "<i>" + serviceInfo.description + " - Is OffLine</i></br>";
				}
			}

			serviceHtml += "</br>"
		     }
		}
	}

	document.getElementById("services").innerHTML = serviceHtml;
</script>
</body>
</html>

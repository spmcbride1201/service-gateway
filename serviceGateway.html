<!doctype html>
<!--[if lt IE 7]>            <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>                 <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>                 <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
<!--<![endif]-->

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- not cache for PKI auth -->
  <meta http-equiv="cache-control" content="max-age=0" />
  <meta http-equiv="cache-control" content="no-cache, no-store" />
  <meta http-equiv="expires" content="0" />
  <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
  <meta http-equiv="pragma" content="no-cache" />
  <base href="/">
  <title>Grey Matter Microservice Fabric</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width">
  <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->

  <link rel="stylesheet" href="static/css/error.css" />
  <link rel="stylesheet" href="./css/uikit.min.css" />
  <link rel="stylesheet" href="./css/styles.css" />
  <script src="./js/jquery-3.2.1.min.js"></script>
  <script src="./js/uikit.min.js"></script>
  <script src="./js/uikit-icons.min.js"></script>

</head>

<body ng-app="chimeraApp" class="chimera ng-scope">

  <!-- STAET CONTENT HEADER -->
  <div class="header content rows-content-header">

    <!-- BEGIN: Navigation bar -->
    <nav class="uk-navbar">
      <div class="uk-navbar-left">
        <div class="uk-navbar-item uk-logo">
          <img alt='Decipher Logo' id='decipher-logo' class="logo" src='./images/decipherLogo.svg' />
          <img alt='Gray Matter Logo' class="logo" id="product-logo" src='./images/gmFabricLogo.svg' />
          <span class="logo" id="logo-text">
            Fabric
          </span>
        </div>
      </div>
    </nav>
    <!-- END: Navigation bar -->

  </div>
  <!-- END CONTENT HEADER -->
  <div class="uk-container">
    <div uk-grid>
      <div class="uk-width-1-2 uk-card uk-card-default">
        <h3 class="uk-card-title">Grey Matter Fabric Architecture</h3>
        <img id="architecture-diagram" src="./images/diagram-gm-fabric.png">
      </div>
      <div class="uk-width-1-2 uk-card uk-card-default">
        <h3 class="uk-card-title">Grey Matter Fabric Architecture</h3>
        <img id="architecture-diagram" src="./images/diagram-gm-fabric.png">
      </div>
      <div class="uk-width-1-1 uk-card uk-card-default">
        <h3 class="uk-card-title">Services</h3>
        <b><i>Online Service Registry:</i></b>
        </br>
        <div id="services"></div>
        <script>
          //Build object model
          var serviceList = {};

          serviceList.aac = [];
          serviceList.aac = [];
          serviceList.apps = [];
          serviceList.apps = [];
          serviceList.user = [];
          serviceList.user = [];
          serviceList.odrive = [];
          serviceList.es = [];
          serviceList.es = [];
          var service = {};

          service.description = "Grey Matter Security v1.1";
          service.url = "https://private.deciphernow.com/services/aac/1.1/admin";
          service.hasServers = true;
          serviceList.aac.push(service);

          var service = {};
          service.description = "Grey Matter Apps v1.0";
          service.url = "https://private.deciphernow.com/services/apps/1.0/admin";
          service.hasServers = true;
          serviceList.apps.push(service);


          var service = {};
          service.description = "Grey Matter Data v1.0";
          service.url = "https://private.deciphernow.com/services/object-drive/1.0/";
          service.hasServers = true;
          serviceList.odrive.push(service);

          var service = {};
          service.description = "Elasticsearch Security Service v1.0";
          service.url = "https://private.deciphernow.com/services/ess/1.0/admin";
          service.hasServers = true;
          serviceList.es.push(service);

          var service = {};
          service.description = "User Service v1.0";
          service.url = "https://private.deciphernow.com/services/userservice/1.0/admin";
          service.hasServers = true;
          serviceList.user.push(service);

          //Create HTML based on categories
          var serviceHtml = '';
          for (var serviceCategory in serviceList) {

            if (serviceCategory != 'hide') {
              if (serviceList.hasOwnProperty(serviceCategory)) {
                var serviceEndpoints = serviceList[serviceCategory];

                for (var service in serviceEndpoints) {
                  var serviceInfo = serviceEndpoints[service];


                  if (serviceInfo.hasServers) {
                    serviceHtml += "<a href=" + serviceInfo.url + ">" + serviceInfo.description + "</a></br>";
                  } else {
                    serviceHtml += "<i>" + serviceInfo.description + " - Is OffLine</i></br>";
                  }
                }

                serviceHtml += "</br>"
              }
            }
          }

          document.getElementById("services").innerHTML = serviceHtml;

        </script>
      </div>
    </div>
    </br>
    </br>

  </div>
</body>

</html>